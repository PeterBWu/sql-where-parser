!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.SqlWhereParser=e()}}(function(){return function e(t,r,n){function o(s,u){if(!r[s]){if(!t[s]){var c="function"==typeof require&&require;if(!u&&c)return c(s,!0);if(i)return i(s,!0);var a=new Error("Cannot find module '"+s+"'");throw a.code="MODULE_NOT_FOUND",a}var h=r[s]={exports:{}};t[s][0].call(h.exports,function(e){var r=t[s][1][e];return o(r?r:e)},h,h.exports,e,t,r,n)}return r[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("./Tokenizer"),c=function(e,t){var r=t[e],n=t[e+1];if(void 0!==n)return[e+1];throw new SyntaxError(r.toUpperCase()+'" requires an operand.')},a=function(e,t){var r=t[e],n=t[e-1],o=t[e+1];if(void 0!==n&&void 0!==o)return[e-1,e+1];throw new SyntaxError(r.toUpperCase()+" requires two operands.")},h=function(e,t){var r=t[e+2],n=t[e+1],o=t[e+3];if(("string"==typeof r||r instanceof String)&&"AND"===r.toUpperCase()&&void 0!==n&&void 0!==o)return[e-1,e+1,e+3];throw new SyntaxError('"BETWEEN" syntax is "BETWEEN {min} AND {max}"')},f=function(e,t){var r=t[e-1],n=t[e+1];if(void 0!==r&&void 0!==n&&n.constructor===Array)return[e-1,new l(e+1)];throw new SyntaxError('"IN" syntax is "IN({array})"')},p=function(e,t){return e-t},l=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),t}(Number);t.exports=function(){function e(){n(this,e);var t=this.constructor.OPERATOR_TYPE_UNARY,r=this.constructor.OPERATOR_TYPE_BINARY,o=this.constructor.OPERATOR_TYPE_TERNARY_BETWEEN,i=this.constructor.OPERATOR_TYPE_BINARY_IN;this.operators=[{"*":r,"/":r,"%":r},{"+":r,"-":r},{"=":r,"!=":r,"<":r,">":r,"<=":r,">=":r},{NOT:t},{BETWEEN:o,IN:i,IS:r,LIKE:r},{AND:r},{OR:r}]}return s(e,[{key:"parse",value:function(e){var t=this,r=[],n=[],o=[],i=[],s=this.constructor.tokenize("("+e+")",function(e){switch(e){case"(":o.push(r.length),i.push(n.length);break;case")":var s=o.pop(),u=i.pop(),c=r.splice(s,r.length),a=n.splice(u,n.length);r.push(t.setPrecedenceInExpression(c)),n.push(t.constructor.reduceArray(a));break;case"":break;default:r.push(e),n.push(e)}});return{tokens:s,expression:this.constructor.reduceArray(r),expressionDisplay:this.constructor.reduceArray(n),expressionTree:this.expressionTreeFromExpression(this.constructor.reduceArray(r))}}},{key:"expressionTreeFromExpression",value:function(e){if(!e||e.constructor!==Array)return e;for(var t=[],r=0;!t.length&&r<e.length;){var n=e[r];if("string"==typeof n||n instanceof String){var o=n.toUpperCase(),i=this.operatorsFlattened[o];if(i){for(var s=[],u=i(r,e),c=0;c<u.length;){var a=u[c++];a.constructor===this.constructor.LiteralIndex?s.push(e[a]):s.push(this.expressionTreeFromExpression(e[a]))}t=[o,s]}}r++}return t}},{key:"setPrecedenceInExpression",value:function(e){if(!e||e.constructor!==Array)return e;for(var t=0;t<this.operators.length;)for(var r=this.operators[t++],n=0;n<e.length;){var o=e[n];if("string"==typeof o||o instanceof String){var i=r[o.toUpperCase()];if(i){var s=i(n,e),u=[n].concat(s).sort(p);n=u[0],e[n]=e.splice(n,u[u.length-1]-n+1,null)}}n++}return this.constructor.reduceArray(e)}},{key:"operatorType",value:function(e){if(!("string"==typeof e||e instanceof String))return null;var t=0,r=!1;for(e=e.toUpperCase();!r&&t<this.operators.length;){for(var n=Object.keys(this.operators[t]),o=0;!r&&o<n.length;){if(n[o]===e){r=this.operators[t][e];break}o++}t++}return r?r:null}},{key:"operatorsFlattened",get:function(){if(!this._operatorsFlattened){this._operatorsFlattened={};for(var e=0;e<this.operators.length;){var t=this.operators[e++];Object.assign(this._operatorsFlattened,t)}}return this._operatorsFlattened}}],[{key:"tokenize",value:function(e,t){var r=new u;return r.tokenize(e,t)}},{key:"reduceArray",value:function(e){for(;e&&e.constructor===Array&&1===e.length;)e=e[0];return e}},{key:"OPERATOR_TYPE_UNARY",get:function(){return c}},{key:"OPERATOR_TYPE_BINARY",get:function(){return a}},{key:"OPERATOR_TYPE_BINARY_IN",get:function(){return f}},{key:"OPERATOR_TYPE_TERNARY_BETWEEN",get:function(){return h}},{key:"LiteralIndex",get:function(){return l}}]),e}()},{"./Tokenizer":2}],2:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i="modeNone",s="modeDefault",u="modeMatch";t.exports=function(){function e(t){n(this,e),this.toTokenize=t||["(",")"],this.matchers={'"':'"',"'":"'","`":"`"},this.delimiters={" ":" ","\n":"\n","\r":"\r","\t":"\t",",":","},this.previousChr=null,this.currentMatcher=null,this.currentToken="",this.modeStack=[i],this.stack=[],this.iteratee=function(){}}return o(e,[{key:"completeCurrentMode",value:function(){this.modeStack.pop()}},{key:"push",value:function(e){if(this.currentMode===s)switch(e.toLowerCase()){case"null":e=null;break;case"true":e=!0;break;case"false":e=!1;break;default:isFinite(e)&&(e=Number(e))}this.iteratee(e),this.stack.push(e)}},{key:"tokenize",value:function(e, t){t&&(this.iteratee=t);for(var r=0; r<e.length;)this.consume(e.charAt(r++));for(; this.currentMode!==i;)this.completeCurrentMode(),this.currentToken&&(this.push(this.currentToken),this.currentToken="");return this.stack}},{key:"consume",value:function(e){this[this.currentMode](e),this.previousChr=e}},{key:i,value:function(e){return this.toTokenize.indexOf(e)!==-1?this.push(e):this.matchers[e]?(this.currentMode=u,void(this.currentMatcher=e)):(this.currentMode=s,this.consume(e))}},{key:s,value:function(e){return this.toTokenize.indexOf(e)!==-1?(this.currentToken.length&&(this.push(this.currentToken),this.currentToken=""),this.push(e),this.completeCurrentMode()):this.delimiters[e]?(this.currentToken.length&&(this.push(this.currentToken),this.currentToken=""),this.completeCurrentMode()):void(this.currentToken+=e)}},{key:u,value:function(e){if(e===this.currentMatcher){if("\\"!==this.previousChr)return this.push(this.currentToken),this.currentToken="",void this.completeCurrentMode();this.currentToken=this.currentToken.substring(0,this.currentToken.length-1)}this.currentToken+=e}},{key:"currentMode",get:function(){return this.modeStack[this.modeStack.length-1]},set:function(e){this.modeStack.push(e)}}]),e}()},{}]},{},[1])(1)});