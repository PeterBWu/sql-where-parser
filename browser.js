!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.GenericSqlParser=e()}}(function(){return function e(t,r,n){function o(u,c){if(!r[u]){if(!t[u]){var s="function"==typeof require&&require;if(!c&&s)return s(u,!0);if(i)return i(u,!0);var a=new Error("Cannot find module '"+u+"'");throw a.code="MODULE_NOT_FOUND",a}var h=r[u]={exports:{}};t[u][0].call(h.exports,function(e){var r=t[u][1][e];return o(r?r:e)},h,h.exports,e,t,r,n)}return r[u].exports}for(var i="function"==typeof require&&require,u=0;u<n.length;u++)o(n[u]);return o}({1:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=e("./Tokenizer"),s=function(e){return e+1},a=function(e){return[e-1,e+1]},h=function(e){return[e-1,e+1,e+3]},f=function(e){return[e-1,new l(e+1)]},l=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),t}(Number),p=function(){function e(){n(this,e);var t=this.constructor.OPERATOR_TYPE_UNARY,r=this.constructor.OPERATOR_TYPE_BINARY,o=this.constructor.OPERATOR_TYPE_BETWEEN,i=this.constructor.OPERATOR_TYPE_BINARY_IN;this.operators=[{"*":r,"/":r,"%":r},{"+":r,"-":r},{"=":r,"!=":r,"<":r,">":r,"<=":r,">=":r},{NOT:t},{BETWEEN:o,IN:i,IS:r,LIKE:r},{AND:r,OR:r}]}return u(e,[{key:"parse",value:function(e){var t=this.sqlToArrays("("+e+")");return t.syntaxTree=this.logicalArrayToSyntaxTree(t.logicalArray),t}},{key:"sqlToArrays",value:function(e){var t=this,r=[],n=[],o=[],i=[],u=new c,s=u.tokenize(e);return s.forEach(function(e){switch(e){case"(":o.push(r.length),i.push(n.length);break;case")":var u=o.pop(),c=i.pop(),s=r.splice(u,r.length),a=n.splice(c,n.length);r.push(t.setPrecedenceInExpression(s)),n.push(t.constructor.reduceArray(a));break;case"":break;default:r.push(e),n.push(e)}}),{logicalArray:this.constructor.reduceArray(r),displayArray:this.constructor.reduceArray(n)}}},{key:"logicalArrayToSyntaxTree",value:function(e){var t=this;if(e.constructor!==Array)return e;var r={};return this.operators.forEach(function(n){for(var o=0; o<e.length;){var i=e[o];if("string"==typeof i||i instanceof String){var u=i.toUpperCase(),c=n[u];if(c){var s=c(o);switch(s.constructor){case Array:r[u]=s.map(function(r){return r.constructor===t.constructor.NoParseIndex?e[r]:t.logicalArrayToSyntaxTree(e[r])});break;case t.constructor.NoParseIndex:r[u]=e[s];break;default:r[u]=t.logicalArrayToSyntaxTree(e[s])}}}o++}}),r}},{key:"setPrecedenceInExpression",value:function(e){var t=[].concat(e);return this.operators.forEach(function(e){for(var r=0; r<t.length;){var n=t[r];if("string"==typeof n||n instanceof String){var o=e[n.toUpperCase()];if(o){var i=o(r);i.constructor!==Array&&(i=[i]);var u=[r].concat(i).sort(),c=u.map(function(e){return t[e]});r=u.shift(),u.reverse().forEach(function(e){t.splice(e,1)}),t[r]=c}}r++}}),this.constructor.reduceArray(t)}},{key:"operatorType",value:function(e){if(!("string"==typeof e||e instanceof String))return!1;var t=0,r=!1;for(e=e.toUpperCase();!r&&t<this.operators.length;){for(var n=Object.keys(this.operators[t]),o=0;!r&&o<n.length;){if(n[o]===e){r=this.operators[t][e];break}o++}t++}return!!r&&r}}],[{key:"reduceArray",value:function(e){for(var t=[].concat(e);t.constructor===Array&&1===t.length;)t=t[0];return t}},{key:"OPERATOR_TYPE_UNARY",get:function(){return s}},{key:"OPERATOR_TYPE_BINARY",get:function(){return a}},{key:"OPERATOR_TYPE_BETWEEN",get:function(){return h}},{key:"OPERATOR_TYPE_BINARY_IN",get:function(){return f}},{key:"LiteralIndex",get:function(){return l}}]),e}(),y=new p,k='name = "Shaun Persad" AND occupation = developer OR (hobby IN ("programming", "nerd stuff") OR "hobby" IS NOT NULL)';console.log("results:");var d=y.parse(k);console.log(JSON.stringify(d))},{"./Tokenizer":2}],2:[function(e, t, r){"use strict";function n(e, t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e, t){for(var r=0; r<t.length; r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i="modeNone",u="modeDefault",c="modeMatch";t.exports=function(){function e(t){n(this,e),this.toTokenize=t||["(",")"],this.matchers={'"':'"',"'":"'","`":"`"},this.delimiters={" ":" ","\n":"\n","\r":"\r","\t":"\t",",":","},this.previousChr=null,this.currentMatcher=null,this.currentToken="",this.modeStack=[i],this.stack=[]}return o(e,[{key:"completeMode",value:function(){this.modeStack.pop()}},{key:"push",value:function(e){this.stack.push(e)}},{key:"tokenize",value:function(e){for(var t=0;t<e.length;)this.consume(e.charAt(t++));return this.stack}},{key:"consume",value:function(e){this[this.currentMode](e),this.previousChr=e}},{key:"checkTokenEnd",value:function(e){e||(e=[]);var t=this.currentToken.charAt(this.currentToken.length-1);return this.toTokenize.indexOf(t)===-1?e:(e.push(t),this.currentToken=this.currentToken.substring(0,this.currentToken.length-1),this.checkTokenEnd(e))}},{key:"handleMultiplePushes",value:function(e){for(var t=0;t<e.length;t++)this.push(e[t])}},{key:i,value:function(e){return this.toTokenize.indexOf(e)!==-1?this.push(e):this.matchers[e]?(this.currentMode=c,void(this.currentMatcher=e)):(this.currentMode=u,this.consume(e))}},{key:u,value:function(e){return this.toTokenize.indexOf(e)!==-1?(this.currentToken.length&&(this.push(this.currentToken),this.currentToken=""),this.push(e),this.completeMode()):this.delimiters[e]?(this.currentToken.length&&(this.push(this.currentToken),this.currentToken=""),this.completeMode()):void(this.currentToken+=e)}},{key:c,value:function(e){if(e===this.currentMatcher){if("\\"!==this.previousChr)return this.push(this.currentToken),this.currentToken="",void this.completeMode();this.currentToken=this.currentToken.substring(0,this.currentToken.length-1)}this.currentToken+=e}},{key:"currentMode",get:function(){return this.modeStack[this.modeStack.length-1]},set:function(e){this.modeStack.push(e)}}]),e}()},{}]},{},[1])(1)});